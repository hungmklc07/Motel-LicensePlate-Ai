{"ast":null,"code":"import axios from 'axios';\nimport { mockAuthService, mockVehicleService, mockHistoryService, mockAlertService } from './mockApi';\n\n// Flag để xác định có sử dụng mock API hay không\nconst USE_MOCK_API = true; // Set thành false khi có backend thật\n\n// Cấu hình API URL\nconst API_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000/api';\n\n// Tạo instance axios với cấu hình mặc định\nconst api = axios.create({\n  baseURL: API_URL,\n  headers: {\n    'Content-Type': 'application/json'\n  }\n});\n\n// Thêm interceptor để gắn token vào header\napi.interceptors.request.use(config => {\n  const token = localStorage.getItem('token');\n  if (token) {\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n  return config;\n}, error => Promise.reject(error));\n\n// Services cho Quản lý Xe\nexport const vehicleService = USE_MOCK_API ? mockVehicleService : {\n  // Lấy danh sách xe đã đăng ký\n  getRegisteredVehicles: () => api.get('/vehicles'),\n  // Lấy chi tiết xe theo ID\n  getVehicleById: id => api.get(`/vehicles/${id}`),\n  // Thêm xe mới\n  addVehicle: vehicleData => api.post('/vehicles', vehicleData),\n  // Cập nhật thông tin xe\n  updateVehicle: (id, vehicleData) => api.put(`/vehicles/${id}`, vehicleData),\n  // Xóa xe\n  deleteVehicle: id => api.delete(`/vehicles/${id}`)\n};\n\n// Services cho Lịch sử nhận diện\nexport const historyService = USE_MOCK_API ? mockHistoryService : {\n  // Lấy lịch sử xe ra vào\n  getVehicleHistory: params => api.get('/history', {\n    params\n  }),\n  // Lấy chi tiết lịch sử theo ID\n  getHistoryById: id => api.get(`/history/${id}`)\n};\n\n// Services cho Cảnh báo xe lạ\nexport const alertService = USE_MOCK_API ? mockAlertService : {\n  // Lấy danh sách cảnh báo xe lạ\n  getAlerts: params => api.get('/alerts', {\n    params\n  }),\n  // Xử lý cảnh báo (đánh dấu đã xem, thêm ghi chú, v.v.)\n  processAlert: (id, alertData) => api.put(`/alerts/${id}`, alertData),\n  // Xóa cảnh báo\n  deleteAlert: id => api.delete(`/alerts/${id}`)\n};\n\n// Services cho Authentication\nexport const authService = USE_MOCK_API ? mockAuthService : {\n  // Đăng nhập\n  login: credentials => api.post('/auth/login', credentials),\n  // Kiểm tra trạng thái đăng nhập\n  checkAuth: () => api.get('/auth/me'),\n  // Đăng xuất\n  logout: () => {\n    localStorage.removeItem('token');\n    return Promise.resolve();\n  }\n};\nexport default api;","map":{"version":3,"names":["axios","mockAuthService","mockVehicleService","mockHistoryService","mockAlertService","USE_MOCK_API","API_URL","process","env","REACT_APP_API_URL","api","create","baseURL","headers","interceptors","request","use","config","token","localStorage","getItem","Authorization","error","Promise","reject","vehicleService","getRegisteredVehicles","get","getVehicleById","id","addVehicle","vehicleData","post","updateVehicle","put","deleteVehicle","delete","historyService","getVehicleHistory","params","getHistoryById","alertService","getAlerts","processAlert","alertData","deleteAlert","authService","login","credentials","checkAuth","logout","removeItem","resolve"],"sources":["C:/Users/linhn/Desktop/btl/frontend/admin/src/services/api.js"],"sourcesContent":["import axios from 'axios';\r\nimport { \r\n  mockAuthService, \r\n  mockVehicleService, \r\n  mockHistoryService, \r\n  mockAlertService \r\n} from './mockApi';\r\n\r\n// Flag để xác định có sử dụng mock API hay không\r\nconst USE_MOCK_API = true; // Set thành false khi có backend thật\r\n\r\n// Cấu hình API URL\r\nconst API_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000/api';\r\n\r\n// Tạo instance axios với cấu hình mặc định\r\nconst api = axios.create({\r\n  baseURL: API_URL,\r\n  headers: {\r\n    'Content-Type': 'application/json',\r\n  },\r\n});\r\n\r\n// Thêm interceptor để gắn token vào header\r\napi.interceptors.request.use(\r\n  (config) => {\r\n    const token = localStorage.getItem('token');\r\n    if (token) {\r\n      config.headers.Authorization = `Bearer ${token}`;\r\n    }\r\n    return config;\r\n  },\r\n  (error) => Promise.reject(error)\r\n);\r\n\r\n// Services cho Quản lý Xe\r\nexport const vehicleService = USE_MOCK_API \r\n  ? mockVehicleService \r\n  : {\r\n    // Lấy danh sách xe đã đăng ký\r\n    getRegisteredVehicles: () => api.get('/vehicles'),\r\n    \r\n    // Lấy chi tiết xe theo ID\r\n    getVehicleById: (id) => api.get(`/vehicles/${id}`),\r\n    \r\n    // Thêm xe mới\r\n    addVehicle: (vehicleData) => api.post('/vehicles', vehicleData),\r\n    \r\n    // Cập nhật thông tin xe\r\n    updateVehicle: (id, vehicleData) => api.put(`/vehicles/${id}`, vehicleData),\r\n    \r\n    // Xóa xe\r\n    deleteVehicle: (id) => api.delete(`/vehicles/${id}`),\r\n  };\r\n\r\n// Services cho Lịch sử nhận diện\r\nexport const historyService = USE_MOCK_API \r\n  ? mockHistoryService \r\n  : {\r\n    // Lấy lịch sử xe ra vào\r\n    getVehicleHistory: (params) => api.get('/history', { params }),\r\n    \r\n    // Lấy chi tiết lịch sử theo ID\r\n    getHistoryById: (id) => api.get(`/history/${id}`),\r\n  };\r\n\r\n// Services cho Cảnh báo xe lạ\r\nexport const alertService = USE_MOCK_API \r\n  ? mockAlertService \r\n  : {\r\n    // Lấy danh sách cảnh báo xe lạ\r\n    getAlerts: (params) => api.get('/alerts', { params }),\r\n    \r\n    // Xử lý cảnh báo (đánh dấu đã xem, thêm ghi chú, v.v.)\r\n    processAlert: (id, alertData) => api.put(`/alerts/${id}`, alertData),\r\n    \r\n    // Xóa cảnh báo\r\n    deleteAlert: (id) => api.delete(`/alerts/${id}`),\r\n  };\r\n\r\n// Services cho Authentication\r\nexport const authService = USE_MOCK_API \r\n  ? mockAuthService \r\n  : {\r\n    // Đăng nhập\r\n    login: (credentials) => api.post('/auth/login', credentials),\r\n    \r\n    // Kiểm tra trạng thái đăng nhập\r\n    checkAuth: () => api.get('/auth/me'),\r\n    \r\n    // Đăng xuất\r\n    logout: () => {\r\n      localStorage.removeItem('token');\r\n      return Promise.resolve();\r\n    },\r\n  };\r\n\r\nexport default api;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}